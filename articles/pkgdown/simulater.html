<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Model &gt; Simulate â€¢ radiant.model</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><!-- docsearch --><script src="../../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Model &gt; Simulate">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">radiant.model</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li>
  <a href="../../articles/index.html">Articles</a>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://radiant-rstats.github.io/radiant/">radiant</a>
    </li>
    <li>
      <a href="https://radiant-rstats.github.io/radiant.data/">radiant.data</a>
    </li>
    <li>
      <a href="https://radiant-rstats.github.io/radiant.design/">radiant.design</a>
    </li>
    <li>
      <a href="https://radiant-rstats.github.io/radiant.basics/">radiant.basics</a>
    </li>
    <li>
      <a href="https://radiant-rstats.github.io/radiant.model/">radiant.model</a>
    </li>
    <li>
      <a href="https://radiant-rstats.github.io/radiant.multivariate/">radiant.multivariate</a>
    </li>
    <li>
      <a href="https://github.com/radiant-rstats/docker">docker</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://twitter.com/vrnijs">
    <span class="fa fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/radiant-rstats">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Model &gt; Simulate</h1>
                        <h4 class="author">Vincent R. Nijs, Rady School of Management (UCSD)</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/radiant-rstats/radiant.model/blob/master/vignettes/pkgdown/simulater.Rmd"><code>vignettes/pkgdown/simulater.Rmd</code></a></small>
      <div class="hidden name"><code>simulater.Rmd</code></div>

    </div>

    
    
<blockquote>
<p>Simulation for decision analysis</p>
</blockquote>
<p>Start by selecting the types of variables to use in the simulation from the <code>Select types</code> dropdown in the <em>Simulate</em> tab. Available types include Binomial, Constant, Discrete, Log normal, Normal, Uniform, Data, Grid search, and Sequence.</p>
<div id="binomial" class="section level3">
<h3 class="hasAnchor">
<a href="#binomial" class="anchor"></a>Binomial</h3>
<p>Add random variables with a binomial distribution using the <code>Binomial variables</code> inputs. Start by specifying a <code>Name</code> (<code>crash</code>), the number of trials (n) (e.g., 20) and the probability (p) of a <code>success</code> (.01). Then press the <i title="Add variable" href="#" class="fa fa-plus-circle"></i> icon. Alternatively, enter (or remove) input directly in the text input area (e.g., crash 20 .01).</p>
</div>
<div id="constant" class="section level3">
<h3 class="hasAnchor">
<a href="#constant" class="anchor"></a>Constant</h3>
<p>List the constants to include in the analysis in the <code>Constant variables</code> input. You can either enter names and values directly into the text area (e.g., <code>cost 3</code>) or enter a name (<code>cost</code>) and a value (5) in the <code>Name</code> and <code>Value</code> input respectively and then press the <i title="Add variable" href="#" class="fa fa-plus-circle"></i> icon. Press the <i title="Remove variable" href="#" class="fa fa-minus-circle"></i> icon to remove an entry. Note that only variables listed in the (larger) text-input boxes will be included in the simulation.</p>
</div>
<div id="discrete" class="section level3">
<h3 class="hasAnchor">
<a href="#discrete" class="anchor"></a>Discrete</h3>
<p>Define random variables with a discrete distribution using the <code>Discrete variables</code> inputs. Start by specifying a <code>Name</code> (<code>price</code>), the values (6 8), and their associated probabilities (.3 .7). Then press the <i title="Add variable" href="#" class="fa fa-plus-circle"></i> icon. Alternatively, enter (or remove) input directly in the text input area (e.g., price 6 8 .3 .7). Note that the probabilities must sum to 1. If not, a message will be displayed and the simulation cannot be run.</p>
</div>
<div id="log-normal" class="section level3">
<h3 class="hasAnchor">
<a href="#log-normal" class="anchor"></a>Log Normal</h3>
<p>To include log normally distributed random variables in the analysis select <code>Log Normal</code> from the <code>Select types</code> dropdown and use <code>Log-normal variables</code> inputs. See the section <code>Normal</code> below for additional information.</p>
</div>
<div id="normal" class="section level3">
<h3 class="hasAnchor">
<a href="#normal" class="anchor"></a>Normal</h3>
<p>To include normally distributed random variables in the analysis select <code>Normal</code> from the <code>Select types</code> dropdown and use <code>Normal variables</code> inputs. For example, enter a <code>Name</code> (<code>demand</code>), the <code>Mean</code> (1000) and the standard deviation (<code>St.dev.</code>, 100). Then press the <i title="Add variable" href="#" class="fa fa-plus-circle"></i> icon. Alternatively, enter (or remove) input directly in the text input area (e.g., <code>demand 1000 100</code>).</p>
</div>
<div id="poisson" class="section level3">
<h3 class="hasAnchor">
<a href="#poisson" class="anchor"></a>Poisson</h3>
<p>The Poisson distribution is useful to simulate the number of times and event occurs in a particular time span, such as the number of patients arriving in an emergency room between 10 and 11pm. To include Poisson distributed random variables in the analysis select <code>Poisson</code> from the <code>Select types</code> dropdown and use <code>Poisson variables</code> inputs. For example, enter a <code>Name</code> (<code>patients</code>) and a value for the number of occurrences <code>Lambda</code> the event of interest (20). Then press the <i title="Add variable" href="#" class="fa fa-plus-circle"></i> icon. Alternatively, enter (or remove) input directly in the text input area (e.g., <code>patients 20</code>).</p>
</div>
<div id="uniform" class="section level3">
<h3 class="hasAnchor">
<a href="#uniform" class="anchor"></a>Uniform</h3>
<p>To include uniformly distributed random variables in the analysis select <code>Uniform</code> from the <code>Select types</code> dropdown. Provide parameters in the <code>Uniform variables</code> inputs. For example, enter a <code>Name</code> (<code>cost</code>), the <code>Min</code> (10) and the <code>Max</code> (15) value. Then press the <i title="Add variable" href="#" class="fa fa-plus-circle"></i> icon. Alternatively, enter (or remove) input directly in the text input area (e.g., <code>cost 10 15</code>).</p>
</div>
<div id="data" class="section level3">
<h3 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h3>
<p>To include variables from a separate data-set in the calculations specified in the <code>Simulation formulas</code> input box, choose a data-set from the <code>Input data for calculations</code> dropdown. This can be very useful in combination with the <code>Grid search</code> feature for portfolio optimization. However, when used in conjunction with other inputs care must be taken to ensure the number of values returned by different calculations is the same. Otherwise you will see an error like:</p>
<p><code>Error: arguments imply differing number of rows: 999, 3000</code></p>
</div>
<div id="grid-search" class="section level3">
<h3 class="hasAnchor">
<a href="#grid-search" class="anchor"></a>Grid search</h3>
<p>To include a sequence of values select <code>Grid search</code> from the <code>Select types</code> dropdown. Provide the minimum and maximum values as well as the step-size in the <code>Grid search</code> inputs. For example, enter a <code>Name</code> (<code>price</code>), the <code>Min</code> (4), <code>Max</code> (10), and <code>Step</code> (0.01) value. If multiple variables are specified in <code>Grid search</code> all possible value combinations will be created and evaluated in the simulation. For example, suppose a first variable is defined as <code>x 1 3 1</code> and a second as <code>y 4 5 1</code> in the <code>Grid search</code> text input then the following data is generated:</p>
<table class="table table table-condensed table-hover">
<thead><tr>
<th style="text-align:left;">
x
</th>
<th style="text-align:left;">
y
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
5
</td>
</tr>
</tbody>
</table>
<p>Note that if <code>Grid search</code> has been selected the number of values generated will override the number of simulations or repetitions specified in <code># sims</code> or <code># reps</code>. If this is not what you want use <code>Sequence</code>. Then press the <i title="Add variable" href="#" class="fa fa-plus-circle"></i> icon. Alternatively, enter (or remove) input directly in the text input area (e.g., <code>price 4 10 0.01</code>).</p>
</div>
<div id="sequence" class="section level3">
<h3 class="hasAnchor">
<a href="#sequence" class="anchor"></a>Sequence</h3>
<p>To include a sequence of values select <code>Sequence</code> from the <code>Select types</code> dropdown. Provide the minimum and maximum values in the <code>Sequence variables</code> inputs. For example, enter a <code>Name</code> (<code>trend</code>), the <code>Min</code> (1) and the <code>Max</code> (1000) value. Note that the number of â€˜stepsâ€™ is determined by the number of simulations. Then press the <i title="Add variable" href="#" class="fa fa-plus-circle"></i> icon. Alternatively, enter (or remove) input directly in the text input area (e.g., <code>trend 1 1000</code>).</p>
</div>
<div id="formulas" class="section level3">
<h3 class="hasAnchor">
<a href="#formulas" class="anchor"></a>Formulas</h3>
<p>To perform a calculation using the generated variables, create a formula in the <code>Simulation formulas</code> input box in the main panel (e.g., <code>profit = demand * (price - cost)</code>). Formulas are used to add (calculated) variables to the simulation or to update existing variables. You must specify the name of the new variable to the left of a <code>=</code> sign. Variable names can contain letters, numbers, and <code>_</code> but no other characters or spaces. You can enter multiple formulas. If, for example, you would also like to calculate the margin in each simulation press <code>return</code> after the first formula and type <code>margin = price - cost</code>.</p>
<p>Many of the same functions used with <code>Create</code> in the <em>Data &gt; Transform</em> tab and in <code>Filter data</code> in <em>Data &gt; View</em> can also be included in formulas. You can use <code>&gt;</code> and <code>&lt;</code> signs and combine them. For example <code>x &gt; 3 &amp; y == 2</code> would evaluate to <code>TRUE</code> when the variable <code>x</code> has values larger than 3 <strong>AND</strong> <code>y</code> has values equal to 2. Recall that in R, and most other programming languages, <code>=</code> is used to <em>assign</em> a value and <code>==</code> to evaluate if the value of a variable is exactly equal to some other value. In contrast <code>!=</code> is used to determine if a variable is <em>unequal</em> to some value. You can also use expressions that have an <strong>OR</strong> condition. For example, to determine when <code>Salary</code> is smaller than $100,000 <strong>OR</strong> larger than $20,000 use <code>Salary &gt; 20000 | Salary &lt; 100000</code>. <code>|</code> is the symbol for <strong>OR</strong> and <code>&amp;</code> is the symbol for <strong>AND</strong> (see also the help file for <em>Data &gt; View</em>).</p>
<p>A few additional examples of formulas are shown below:</p>
<ul>
<li>Create a new variable z that is the difference between variables x and y</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">z =<span class="st"> </span>x <span class="op">-</span><span class="st"> </span>y</a></code></pre></div>
<ul>
<li>Create a new <code>logical</code> variable z that takes on the value TRUE when x &gt; y and FALSE otherwise</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">z =<span class="st"> </span>x <span class="op">&gt;</span><span class="st"> </span>y</a></code></pre></div>
<ul>
<li>Create a new <code>logical</code> z that takes on the value TRUE when x is equal to y and FALSE otherwise</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">z =<span class="st"> </span>x <span class="op">==</span><span class="st"> </span>y</a></code></pre></div>
<ul>
<li>The command above is equivalent to the one below using <code>ifelse</code>. Note the similarity to <code>if</code> statements in Excel</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">z =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ifelse">ifelse</a></span>(x <span class="op">&lt;</span><span class="st"> </span>y, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</a></code></pre></div>
<ul>
<li>
<code>ifelse</code> statements can be used to create more complex (numeric) variables as well. In the example below, z will take on the value 0 if x is smaller than 60. If x is larger than 100, z is set equal to 1. Finally, when x is 60, 100, or between 60 and 100, z is set to 2. <strong>Note:</strong> make sure to include the appropriate number of opening <code>(</code> and closing <code>)</code> brackets!</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">z =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ifelse">ifelse</a></span>(x <span class="op">&lt;</span><span class="st"> </span><span class="dv">60</span>, <span class="dv">0</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ifelse">ifelse</a></span>(x <span class="op">&gt;</span><span class="st"> </span><span class="dv">100</span>, <span class="dv">1</span>, <span class="dv">2</span>))</a></code></pre></div>
<ul>
<li>To create a new variable z that is a transformation of variable x but with mean equal to zero:</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">z =<span class="st"> </span>x <span class="op">-</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(x)</a></code></pre></div>
<ul>
<li>To create a new variable z that shows the absolute values of x:</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">z =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/MathFun">abs</a></span>(x)</a></code></pre></div>
<ul>
<li>To find the value for <code>price</code> that maximizes <code>profit</code> use the <code>find_max</code> command. In this example <code>price</code> could be a random or <code>Sequence variable</code>. There is also a <code>find_min</code> command.</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">optimal_price =<span class="st"> </span><span class="kw">find_max</span>(profit, price)</a></code></pre></div>
<ul>
<li>To determine the minimum (maximum) value for each pair of values across multiple variables (e.g., x and y) use the functions <code>pmin</code> and <code>pmax</code>. In the example below, z will take on the value of x when x is larger than y and take on the value of y otherwise.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">z =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Extremes">pmax</a></span>(x, y)</a></code></pre></div>
<p>See the table below for an example:</p>
<table class="table table table-condensed table-hover">
<thead><tr>
<th style="text-align:left;">
x
</th>
<th style="text-align:left;">
y
</th>
<th style="text-align:left;">
pmax(x,y)
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
10
</td>
</tr>
</tbody>
</table>
<ul>
<li>Similar to <code>pmin</code> and <code>pmax</code> a number of functions are available to calculate summary statics across multiple variables. For example, <code>psum</code> calculates the sum of elements across different vectors. See <a href="https://radiant-rstats.github.io/radiant.data/reference/pfun.html" class="uri" target="_blank">https://radiant-rstats.github.io/radiant.data/reference/pfun.html</a> for more information.</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">z =<span class="st"> </span><span class="kw">psum</span>(x, y)</a></code></pre></div>
<p>See the table below for an example:</p>
<pre><code>## Loading required package: ggplot2</code></pre>
<pre><code>## Loading required package: lubridate</code></pre>
<pre><code>## 
## Attaching package: 'lubridate'</code></pre>
<pre><code>## The following object is masked from 'package:base':
## 
##     date</code></pre>
<pre><code>## Loading required package: tidyr</code></pre>
<pre><code>## 
## Attaching package: 'tidyr'</code></pre>
<pre><code>## The following object is masked from 'package:magrittr':
## 
##     extract</code></pre>
<pre><code>## Registered S3 method overwritten by 'radiant.data':
##   method       from  
##   print.gtable gtable</code></pre>
<pre><code>## 
## Attaching package: 'radiant.data'</code></pre>
<pre><code>## The following objects are masked from 'package:lubridate':
## 
##     month, wday</code></pre>
<pre><code>## The following object is masked from 'package:ggplot2':
## 
##     diamonds</code></pre>
<table class="table table table-condensed table-hover">
<thead><tr>
<th style="text-align:left;">
x
</th>
<th style="text-align:left;">
y
</th>
<th style="text-align:left;">
psum(x,y)
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
11
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
15
</td>
</tr>
</tbody>
</table>
<p>Other commonly used functions are <code>ln</code> for the natural logarithm (e.g., ln(x)), <code>sqrt</code> for the square-root of x (e.g., sqrt(x)) and <code>square</code> to calculate square of a variable (e.g., square(x)).</p>
<p>To return a single value from a calculation use functions such as <code>min</code>, <code>max</code>, <code>mean</code>, <code>sd</code>, etc.</p>
<ul>
<li>A special function useful for portfolio optimization is <code>sdw</code>. It takes weights and variables as inputs and returns the standard deviation of the weighted sum of the variables. For example, to calculated the standard deviation for a portfolio of three stocks (e.g., Boeing, GM, and Exxon) you could use the equation below in the <code>Simulation formulas</code> input. <code>f</code> and <code>g</code> could be values (e.g., 0.2 and 0.8) or vectors of different weights specified in a <code>Grid search</code> input (see above). <code>Boeing</code>, <code>GM</code>, and <code>Exxon</code> are names of variables in a data-set included in the simulation using a <code>Data</code> input (see above).</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">Pstdev =<span class="st"> </span><span class="kw">sdw</span>(f, g, <span class="dv">1</span><span class="op">-</span>f<span class="op">-</span>g, Boeing, GM, Exxon)</a></code></pre></div>
<p>For an example of how the simulate tool could be used for portfolio optimization see the state-file available for download <a href="https://radiant-rstats.github.io/docs/examples/investment-3stocks.state.rda">here</a></p>
</div>
<div id="running-the-simulation" class="section level3">
<h3 class="hasAnchor">
<a href="#running-the-simulation" class="anchor"></a>Running the simulation</h3>
<p>The value shown in the <code># sims</code> input determines the number of simulation <em>draws</em>. To redo a simulation with the same randomly generated values, specify a number in the <code>Set random seed</code> input (e.g., 1234).</p>
<p>To save the simulated data for further analysis, specify a name in the <code>Simulated data</code> input box. You can then investigate the simulated data by choosing the data with the specified name from the <code>Datasets</code> dropdown in any of the <em>Data</em> tabs (e.g., <em>Data &gt; View</em>, <em>Data &gt; Visualize</em>, or <em>Data &gt; Explore</em>).</p>
<p>When all required inputs have been specified press the <code>Simulate</code> button to run the simulation.</p>
<p>In the screen shot below <code>var_cost</code> and <code>fixed_cost</code> are specified as constants. <code>E</code> is normally distributed with a mean of 0 and a standard deviation of 100. <code>price</code> is a discrete random variable that is set to $6 (30% probability) or $8 (70% probability). There are three formulas in the <code>Simulation formulas</code> text-input. The first establishes the dependence of <code>demand</code> on the simulated variable <code>price</code>. The second formula specifies the profit function. The final formula is used to determine the number (and proportion) of cases where profit is below 100. The result is assigned to a new variable <code>profit_small</code>.</p>
<p align="center">
<img src="https://radiant-rstats.github.io/docs/model/figures_model//simulater_sim.png"></p>
<p>In the output under <code>Simulation summary</code> we first see details on the specification of the simulation (e.g., the number of simulations). The section <code>Constants</code> lists the value of variables that do not vary across simulations. The sections <code>Random variables</code> and <code>Logicals</code> list the outcomes of the simulation. We see that average <code>demand</code> in the simulation is 627.94 with a standard deviation of 109.32. Other characteristics of the simulated data are also provided (e.g., the maximum profit is 1758.77). Finally, we see that the probability of <code>profits</code> below 100 is equal 0.32 (i.e., profits were below $100 in 315 out of the 1,000 simulations).</p>
<p>To view histograms of the random variables as well as the variables created using <code>Simulation formulas</code> ensure <code>Show plots</code> is checked.</p>
<p align="center">
<img src="https://radiant-rstats.github.io/docs/model/figures_model//simulater_sim_plot.png"></p>
<p>Because we specified a name in the <code>Simulated data</code> box the data are available as <code>simdat</code> within Radiant (see screen shots below). To use the data in Excel click the download icon on the top-right of the screen in the <em>Data &gt; View</em> tab or go to the <em>Data &gt; Manage</em> tab and save the data to a csv file (or use the clipboard feature). For more information see the help file for the <em>Data &gt; Manage</em> tab.</p>
<p align="center">
<img src="https://radiant-rstats.github.io/docs/model/figures_model//simulater_view.png"></p>
</div>
<div id="repeating-the-simulation" class="section level2">
<h2 class="hasAnchor">
<a href="#repeating-the-simulation" class="anchor"></a>Repeating the simulation</h2>
<p>Suppose the simulation discussed above was used to get a better understanding of daily profits. To develop insights into annual profits we could re-run the simulation 365 times. This can be done easily by using the functionality available in the <em>Repeat</em> tab. First, select the <code>Variables to re-simulate</code>, here <code>E</code> and <code>price</code>. Then select the variable(s) of interest in the <code>Output variables</code> box (e.g., <code>profit</code>). Set <code># reps</code> to 365.</p>
<p>Next, we need to determine how to summarize the data. If we select <code>Simulation</code> in <code>Group by</code> the data will be summarized for each draw in the simulation <strong>across</strong> 365 repeated simulations resulting in 1,000 values. If we select <code>Repeat</code> in <code>Group by</code> the data will be summarized for each repetition <strong>across</strong> 1000 simulations resulting in 365 values. If you imagine the full set of repeated simulated data as a table with 1,000 rows and 365 columns, grouping by <code>Simulation</code> will create a summary statistic for each row and grouping by <code>Repeat</code> will create a summary statistic for each column. In this example we want to determine the <code>sum</code> of simulated daily profits across 365 repetitions so we select <code>Simulation</code> in the <code>Group by</code> box and <code>sum</code> in the <code>Apply function</code> box.</p>
<p>To determine, the probability that annual profits are below $36,500 we enter the formula below into the <code>Repeated simulation formula</code> text input.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">profit_<span class="dv">365</span> =<span class="st"> </span>profit <span class="op">&lt;</span><span class="st"> </span><span class="dv">36500</span></a></code></pre></div>
<p>When you are done with the input values click the <code>Repeat</code> button. Because we specified a name for <code>Repeat data</code> a new data set will be created. <code>repdat</code> will contain the summarized data grouped per simulation (i.e., 1,000 rows). To store all 365 x 1,000 simulations/repetitions select <code>none</code> from the <code>Apply function</code> dropdown.</p>
<p>Descriptive statistics for the repeated simulation are shown in the main panel under <code>Repeated simulation summary</code>. We see that the annual expected profit (i.e., the mean of <code>sum of profit</code>) for the company is 172,311.84 with a standard deviation of 10,772.29. Although we found above that daily profits can be below $100, the chance that profits are below <span class="math inline">\(365 \times 100\)</span> for the entire year are slim to none (i.e., the proportion of repeated simulations with annual profits below $36,500 is equal to 0).</p>
<p align="center">
<img src="https://radiant-rstats.github.io/docs/model/figures_model//simulater_repeat.png"></p>
<p>If <code>Show plots</code> is checked a histogram of annual profits (<code>sum of profit</code>) is shown under <code>Repeated simulation plots</code>. There is no plot for <code>profit_365</code> because it has only one value (i.e., FALSE).</p>
<p align="center">
<img src="https://radiant-rstats.github.io/docs/model/figures_model//simulater_repeat_plot.png"></p>
<p>The state-file for the example in the screenshots above is available for download <a href="https://radiant-rstats.github.io/docs/examples/sim-help.state.rda">here</a></p>
<p>For a simple example of how the simulate tool could be used to find the price that maximizes profits see the state-file available for download <a href="https://radiant-rstats.github.io/docs/examples/iceskimo-optimal-price.state.rda">here</a></p>
<div id="using-grid-search-in-the-repeat-tab" class="section level3">
<h3 class="hasAnchor">
<a href="#using-grid-search-in-the-repeat-tab" class="anchor"></a>Using Grid Search in the Repeat tab</h3>
<p>Note that the <em>Repeat</em> tab also has the option to use a <code>Grid search</code> input to repeat a simulation by replacing one or more <code>Constants</code> specified in the <code>Simulation</code> tab in an iterative fashion. This input option is shown only when <code>Group by</code> is set to <code>Repeat</code>. Provide the minimum and maximum values as well as the step-size in the <code>Grid search</code> inputs. For example, enter a <code>Name</code> (<code>price</code>), the <code>Min</code> (4), <code>Max</code> (10), and <code>Step</code> (0.01) value. If multiple variables are specified in <code>Grid search</code> all possible value combinations will be created and evaluated in the simulation. Note that if <code>Grid search</code> has been selected the number of values generated will override the number of repetitions specified in <code># reps</code>. Then press the <i title="Add variable" href="#" class="fa fa-plus-circle"></i> icon. Alternatively, enter (or remove) input directly in the text area (e.g., <code>price 4 10 0.01</code>).</p>
</div>
<div id="report-rmd" class="section level3">
<h3 class="hasAnchor">
<a href="#report-rmd" class="anchor"></a>Report &gt; Rmd</h3>
<p>Add code to <a href="https://radiant-rstats.github.io/docs/data/report_rmd.html" target="_blank"><em>Report &gt; Rmd</em></a> to (re)create the analysis by clicking the <i title="report results" class="fa fa-edit"></i> icon on the bottom left of your screen or by pressing <code>ALT-enter</code> on your keyboard.</p>
<p>If a plot was created it can be customized using <code>ggplot2</code> commands or with <code>gridExtra</code>. See example below and <a href="https://radiant-rstats.github.io/docs/data/visualize.html" target="_blank"><em>Data &gt; Visualize</em></a> for details.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(result, <span class="dt">custom =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="st">  </span>gridExtra<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/gridExtra/topics/arrangeGrob">grid.arrange</a></span>(<span class="dt">grobs =</span> ., <span class="dt">top =</span> <span class="st">"Simulation plots"</span>, <span class="dt">ncol =</span> <span class="dv">2</span>)</a></code></pre></div>
</div>
<div id="r-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#r-functions" class="anchor"></a>R-functions</h3>
<p>For an overview of related R-functions used by Radiant to construct and evaluate (repeated) simulation models see <a href="https://radiant-rstats.github.io/radiant.model/reference/index.html#section-model-simulate" target="_blank"><em>Model &gt; Simulate</em></a></p>
<p>Â© Vincent Nijs (2018) <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="Creative Commons License" style="border-width: 0" src="./images/by-nc-sa.png"></a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#repeating-the-simulation">Repeating the simulation</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Vincent Nijs.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '279f8fe71a37f83093f51a606ddc3f50',
    indexName: 'radiant_model',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
